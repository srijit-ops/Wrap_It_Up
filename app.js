const target= document.querySelector("#preview")
const upload= document.querySelector("#avatar")
const uploadNew= document.querySelector("#right")
const editBtn=document.querySelector("#edit")
const downBtn= document.querySelector("#download")
var source

//to upload the image and show it before editing
function prevImg(input) { 
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) { 
        target.setAttribute("src",e.target.result);
        source= e.target.result;
        target.classList.add("beforeClick")
        target.classList.add("styling")
        editBtn.classList.remove("editPrev")
        editBtn.style.display="block" //edit button will only visible after uploading the pic
        
        if(uploadNew.lastChild.classList.contains("wrapper")){ //to clear the old edited pic and download button of first time when u are uploading a new pic for the second time 
          uploadNew.lastChild.remove()
          downBtn.classList.remove("downShow")
          downBtn.classList.add("downImg")
        }
      };
      reader.readAsDataURL(input.files[0]); 
    }
  }

//to edit the image
function edit(){
    const wrapper= document.createElement("div")
    wrapper.classList.add("wrapper")
    const portrait =document.createElement("div")
    portrait.innerText="Lorem ipsum dolor sit amet consectetur adipisicing elit. Saepe necessitatibus dolore provident temporibus id delectus accusantium nisi esse, voluptas error corporis magni minus quo ratione aperiam atque praesentium rerum nihil commodi vitae sequi ea asperiores. Accusamus sequi non illo maiores assumenda, earum laborum fugiat veniam vero nisi iure aliquam facere quia, tenetur quam est illum eveniet numquam! Accusantium deleniti quam accusamus placeat aperiam, dolores sapiente dolorem error quasi? Dignissimos mollitia omnis numquam fuga maxime ipsam eum deleniti. Maiores repudiandae consequuntur consectetur, unde quas dolore aut ut qui accusamus, expedita dicta soluta nisi blanditiis incidunt vel voluptas minima mollitia illum reiciendis? Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem quis omnis harum inventore tempore, explicabo incidunt voluptate eos cupiditate voluptatem quasi ipsam sit nisi magni autem veritatis officia aliquam. Tenetur, autem recusandae. Ullam quasi magni delectus eveniet eum non quaerat, nisi deleniti quo magnam aut libero. Laudantium similique, necessitatibus magnam eligendi suscipit dolores inventore qui debitis placeat ex quas, vel perspiciatis cumque beatae corrupti adipisci dignissimos sit eum incidunt? Aut voluptas qui deleniti, quas, facere molestiae dolorem harum tempore impedit voluptatum, veniam beatae itaque? Beatae minus minima suscipit omnis deleniti, sequi dolore eius asperiores quos nobis consequuntur odit soluta nesciunt a aperiam architecto! Voluptatum quam nihil atque similique libero! Libero fuga repudiandae necessitatibus recusandae eaque voluptas aperiam aut nulla a eveniet! Nisi eius autem hic porro, qui enim commodi doloremque? Id amet, dolor assumenda nulla quod maiores cum sapiente ex aut pariatur libero itaque nihil necessitatibus consequatur mollitia, quam rerum porro odio autem molestiae asperiores. Ipsam ut, at commodi quae inventore sed nobis sit officia earum corrupti praesentium, dolorum nemo laudantium quas, sequi iste esse error fugit quibusdam amet modi unde cumque repudiandae. Unde mollitia omnis distinctio ad sequi nihil consequatur dolorem sunt molestiae in, nisi voluptatum minima quis reiciendis optio neque est quos accusantium doloremque, nulla fugiat tenetur cumque, nam placeat. Illo ut aspernatur earum odio aperiam nam minima, nemo porro sed consequatur ad ab vitae autem laudantium officiis officia quaerat qui ipsa architecto eum perferendis quis molestias voluptatibus. Tempore neque fugit molestias optio quas veniam omnis molestiae nulla? Accusantium perferendis voluptates enim beatae commodi. Aliquid et voluptatibus eaque debitis vitae commodi dolorem, reiciendis repellat! Temporibus minus dicta quod sequi quia omnis impedit nesciunt vero aliquam. Tempora rerum qui excepturi temporibus odio! Blanditiis in eius sapiente doloremque aut adipisci voluptatum rem praesentium porro impedit repellat maxime alias sint deserunt, dolore, suscipit error aliquid placeat! Magnam nisi eveniet magni necessitatibus, quos aut a harum! Sit inventore in ab harum? Neque delectus labore, odio cumque veniam distinctio excepturi reiciendis. Perspiciatis repudiandae sequi quaerat minima voluptates omnis ipsum eos iste. Commodi libero laudantium, eos alias similique recusandae temporibus deserunt velit cumque explicabo, quasi, quas tempora sequi a ullam veritatis. Earum distinctio labore dicta sequi consectetur, asperiores nulla, voluptas dolor, perferendis inventore rem eos qui. Reprehenderit magnam possimus repudiandae ut est consequatur aliquid saepe sint nemo itaque illo nam quod, veniam ratione quas in quisquam. Minus, quis corporis. Ratione nam quisquam fugiat deleniti. Lorem ipsum dolor sit amet consectetur, adipisicing elit. Et modi eaque consequuntur, laudantium cumque adipisci unde necessitatibus, atque quia ducimus corporis ipsam. Mollitia amet voluptatem similique ut velit dolores quasi voluptas cum ab fuga adipisci repellendus eaque neque recusandae ipsa, tenetur illum deleniti sint. Perspiciatis corrupti et, unde quod iusto cum, optio placeat, ex accusamus blanditiis harum sit temporibus quo tempora ut voluptate nam ipsum minima consequatur! Commodi porro fuga officia aut. Maxime, consectetur? Incidunt consequuntur corporis voluptatum omnis sunt. Quaerat sit debitis sed magnam exercitationem iure optio enim sequi perspiciatis. Iste, cupiditate distinctio delectus velit dolores repellat tempora, nihil nemo neque doloribus temporibus assumenda itaque. Quod ut quia, inventore, laudantium doloribus nam asperiores hic libero vel repudiandae dolore sed ipsum? Iure fugiat nesciunt quo sit ducimus qui minima, tenetur adipisci. Nesciunt beatae fugiat aspernatur quis autem ratione saepe cum optio, blanditiis iste! Error fugiat delectus soluta obcaecati maiores harum distinctio saepe possimus totam vel, sint ea nobis beatae mollitia nostrum quidem quibusdam et fugit voluptatem pariatur. Voluptatem incidunt assumenda distinctio optio adipisci maxime doloremque iusto exercitationem, saepe dignissimos labore autem totam veritatis aliquid amet molestiae. Placeat doloremque fugiat odit quasi cum enim provident maiores totam, aut labore! Voluptatum, cumque accusantium dolores delectus dolor repellat illum architecto itaque autem modi sed temporibus libero adipisci deserunt hic ex excepturi fuga molestiae atque magnam reiciendis tempore ea? Consectetur doloribus maxime vitae culpa veniam cupiditate ab odit iusto, obcaecati blanditiis maiores quos sunt modi sequi asperiores placeat nobis fugiat voluptatibus incidunt, ut fuga, adipisci corrupti! Voluptatum eius reprehenderit nemo aperiam mollitia ad doloremque architecto est ullam. Nulla inventore architecto, unde hic nam aperiam quae numquam laborum accusamus voluptates! Doloribus, quia quasi. Iusto, quae earum. Facilis, veritatis asperiores praesentium beatae voluptatibus quo! Reprehenderit sint voluptatibus rerum optio incidunt beatae quia corrupti laborum quisquam labore! Lorem ipsum dolor sit amet consectetur, adipisicing elit. Possimus magnam, quod magni in recusandae reprehenderit accusantium fugiat unde sint quo. Lorem, ipsum dolor sit amet consectetur adipisicing elit. Et veniam consequatur itaque ratione similique nostrum exercitationem voluptas debitis reprehenderit, aliquid, quidem iure placeat reiciendis quibusdam odio dolorum natus nulla perspiciatis vitae nemo! Illum eius magnam harum! Voluptas et repellat aliquid non saepe, beatae rerum, architecto quas autem rem hic molestias libero alias placeat nobis excepturi aliquam doloremque eum dicta quibusdam explicabo omnis, corporis maiores? Cum molestias rem iste tempore, eveniet libero ut illum optio dicta, id, temporibus accusamus laborum natus. Molestias dolorem quo ex dignissimos repellendus doloremque ipsa qui laudantium, esse quidem mollitia error, tenetur sapiente fuga? Molestias, natus harum? Lorem ipsum dolor sit amet, consectetur adipisicing elit. Impedit deleniti obcaecati ab quos eaque sit nihil eveniet quia aut! Iste consequatur molestias illum expedita soluta cum distinctio qui dolorum voluptates? Lorem ipsum dolor sit amet consectetur, adipisicing elit. A quae, recusandae voluptatum quasi quisquam error nihil ex, est nobis veniam cum sint laborum repellat ipsam velit aliquam tempora laboriosam? Saepe? Lorem ipsum dolor sit amet consectetur adipisicing elit. Incidunt ullam esse dolores magni vitae? Voluptatem reprehenderit hic ipsam voluptas tempore. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nostrum omnis nam iste atque, rerum commodi, velit ratione cum blanditiis reiciendis, ex temporibus adipisci assumenda accusamus ipsam illum libero fuga magni? Sed distinctio, facere architecto autem est, dicta odit a quia deserunt eligendi ut vel! Itaque quidem, error non nesciunt veniam id assumenda pariatur cumque quae, autem voluptates, possimus laboriosam illum recusandae reiciendis hic fuga sapiente numquam rem. Neque provident nesciunt ratione labore quaerat obcaecati minima sed nisi, sunt voluptate inventore incidunt ipsum rem commodi atque reprehenderit doloribus voluptas veniam numquam fugit. Commodi possimus sunt nulla at consectetur! Sit libero nisi mollitia officiis, exercitationem ex nam aliquam? Inventore, itaque tempore quaerat corrupti rem atque similique dolores facilis id facere, dignissimos nostrum voluptatibus veritatis libero error sint officia, voluptatum beatae eos! Libero rem officiis dolore, excepturi quasi ab quam earum. Exercitationem mollitia porro harum! Eaque ab dolore nam, dolor quibusdam eum incidunt obcaecati, illo officiis laborum consectetur. Atque velit quos corrupti eligendi necessitatibus laborum tempora assumenda, inventore, eveniet optio magni laboriosam? Repellendus repudiandae quaerat aspernatur praesentium ex iure omnis quis itaque quasi optio. Dolore aspernatur laboriosam expedita excepturi eos velit. Maiores, voluptates nemo? Velit beatae dolore magnam illum! Minima itaque possimus distinctio, numquam ipsa consectetur voluptates debitis ipsam repudiandae animi quisquam, fuga nobis aut et. Quas temporibus voluptas dicta dolore, ea enim, non qui officia deserunt itaque consectetur impedit odit porro officiis praesentium facere nesciunt id repellat, molestiae odio velit nulla! Adipisci distinctio aut maxime placeat animi voluptates debitis natus odit similique voluptas autem, facere optio, repellat ducimus quasi quis totam odio veritatis fugit soluta quaerat incidunt veniam sit. Quaerat beatae, assumenda repellendus repellat labore facilis ad laudantium sapiente dolores consequuntur libero nesciunt, harum omnis! Incidunt molestiae blanditiis quisquam dolor soluta perspiciatis ex similique dignissimos, veniam autem obcaecati ab praesentium tempore officiis animi! Eligendi perspiciatis repellat corrupti similique possimus voluptatem temporibus tempora aut voluptatibus cupiditate. Impedit laborum tempora reiciendis repellendus iusto, natus, laboriosam architecto accusamus hic exercitationem adipisci fugiat quas. Numquam aspernatur adipisci maxime quidem a dolorem aut impedit debitis temporibus asperiores inventore saepe cupiditate, modi, qui quo veritatis odit. Impedit inventore voluptas architecto consequuntur, dolores vel quos qui in quisquam. Libero voluptas similique sequi animi enim itaque accusamus eaque illum nihil officiis, ex quidem, repellendus distinctio eos. Obcaecati quod, incidunt pariatur fugiat saepe accusamus hic quam minus tenetur magni deleniti deserunt cum ipsam adipisci modi vel animi neque et dolorem eos natus temporibus aspernatur. Ea quod aliquid qui quos doloremque! Omnis necessitatibus aliquam esse quidem amet! Libero, iure cupiditate at perspiciatis, obcaecati dolore amet quam quae, aut animi officiis? Dolorem exercitationem perspiciatis quo ipsum, nostrum dignissimos earum ea fugit eaque repellendus explicabo necessitatibus maxime qui repellat quod rerum cum! Placeat, esse eos. Architecto ratione consectetur fugiat aut. Labore iusto asperiores sed et id. Doloremque molestias consectetur recusandae! Ut nostrum vel hic ipsa aliquid dignissimos eum molestias vero, eius, reprehenderit blanditiis voluptas cumque aut in eligendi voluptate rem nemo debitis at soluta similique illo beatae officia fugit! Iure doloribus quis delectus voluptatibus?"
    portrait.style.background=`url(${source})`
    portrait.classList.add("portrait")
    wrapper.appendChild(portrait)
    uploadNew.appendChild(wrapper)
    downBtn.classList.remove("downImg")
    downBtn.classList.add("downShow") //download btn will only be vsible after editing the pic
}

//to download the image using html2canvas lib
function downloadImg(){
  const targetDiv= document.querySelector(".wrapper")
  html2canvas(targetDiv, { allowTaint: true }).then(function (canvas) {
    var link = document.createElement("a");
    document.body.appendChild(link);
    link.download = "edited_image.jpg";
    link.href = canvas.toDataURL();
    link.target = '_blank';
    link.click();
});
}

